<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ANAA ENTERPRISES ‚Äî Home</title>
  <meta name="description" content="Furniture, Electronics, Home Appliances, Household Products, Plastic Products, Blankets & Mattress."/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        fontFamily: { sans: ['Inter','system-ui','sans-serif'] },
        extend: {
          colors: { brand: { 600:'#0f78c6', 700:'#0d63a5' } },
          boxShadow: { soft:'0 20px 40px rgba(0,0,0,0.10)' }
        }
      }
    }
  </script>
  <style>
    .carousel { position:relative; overflow:hidden }
    .carousel-track { display:flex; transition: transform .6s ease }
    .carousel-slide { min-width:100%; flex-shrink:0 }
    .no-scrollbar::-webkit-scrollbar{ display:none }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">

  <!-- Top strip -->
  <div class="hidden md:block bg-gray-900 text-gray-100 text-xs">
    <div class="mx-auto max-w-7xl px-4 h-9 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <span>WhatsApp: <a href="https://wa.me/917005023608" class="underline">+91 70050 23608</a></span>
        <span class="hidden sm:inline">Email: <a href="mailto:joykumarkaram@gmail.com" class="underline">joykumarkaram@gmail.com</a></span>
      </div>
      <div class="flex items-center gap-4">
        <a href="signin.html" class="hover:underline">Sign In</a>
        <a href="signup.html" class="hover:underline">Sign Up</a>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-white/90 backdrop-blur border-b">
    <div class="mx-auto max-w-7xl px-4 h-16 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-2">
        <div class="h-10 w-10 rounded-2xl bg-brand-600 text-white grid place-content-center font-extrabold">A</div>
        <div class="leading-tight">
          <div class="text-lg font-extrabold">ANAA ENTERPRISES</div>
          <div class="text-xs text-gray-500">Home needs, one place</div>
        </div>
      </a>

      <form id="searchForm" class="hidden md:flex items-center gap-2">
        <input id="q" placeholder="Search products..." class="w-64 rounded-xl border px-3 py-2 text-sm" />
        <button class="rounded-xl border px-3 py-2 text-sm">Search</button>
      </form>

      <nav class="hidden md:flex items-center gap-6 text-sm font-semibold">
        <a href="index.html" class="hover:text-brand-700">Home</a>
        <a href="products.html" class="hover:text-brand-700">Products</a>
        <a href="cart.html" class="hover:text-brand-700">Cart (<span id="cartCount">0</span>)</a>
      </nav>

      <button id="navToggle" class="md:hidden p-2 rounded-lg border text-sm">Menu</button>
    </div>

    <!-- Mobile drawer -->
    <div id="mobileNav" class="md:hidden hidden border-t bg-white">
      <div class="mx-auto max-w-7xl px-4 py-3 text-sm">
        <form id="mSearch" class="flex gap-2 mb-2">
          <input id="mq" placeholder="Search products..." class="flex-1 rounded-xl border px-3 py-2 text-sm" />
          <button class="rounded-xl border px-3 py-2 text-sm">Go</button>
        </form>
        <a href="index.html" class="block py-2">Home</a>
        <a href="products.html" class="block py-2">Products</a>
        <a href="cart.html" class="block py-2">Cart (<span data-cart-count>0</span>)</a>
        <a href="signin.html" class="block py-2">Sign In</a>
        <a href="signup.html" class="block py-2">Sign Up</a>
      </div>
    </div>
  </header>

  <!-- Location / Delivery bar -->
  <section class="bg-white border-b">
    <div class="mx-auto max-w-7xl px-4 py-3 text-sm flex items-center gap-2">
      <span class="inline-flex items-center justify-center h-7 w-7 rounded-full bg-gray-100">üìç</span>
      Delivering to <strong class="ml-1">Imphal 795008</strong>
      <a href="#" class="ml-2 text-brand-700 font-semibold hover:underline text-xs">Change</a>
    </div>
  </section>

  <!-- Hero carousel -->
  <section class="carousel border-b bg-white">
    <div class="carousel-track" id="heroTrack">
      <!-- slides injected by JS -->
    </div>
    <div class="absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2" id="heroDots"></div>
  </section>

  <!-- Category chips -->
  <section class="bg-white border-b">
    <div class="mx-auto max-w-7xl px-4 py-4 flex gap-3 overflow-x-auto no-scrollbar" id="catChips"></div>
  </section>

  <!-- Category icons row -->
  <section class="bg-white">
    <div class="mx-auto max-w-7xl px-4 py-4">
      <div class="flex gap-6 overflow-x-auto no-scrollbar" id="catIcons"></div>
    </div>
  </section>

  <!-- Latest Offers grid -->
  <section class="bg-gray-50 border-t">
    <div class="mx-auto max-w-7xl px-4 py-8">
      <div class="flex items-end justify-between">
        <h2 class="text-2xl font-extrabold">Latest Offers</h2>
        <a href="products.html" class="text-sm font-semibold text-brand-700 hover:underline">Browse all ‚Üí</a>
      </div>
      <div id="offerGrid" class="mt-4 grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
    </div>
  </section>

  <!-- Popular Now grid with sort + search -->
  <section class="bg-white border-t">
    <div class="mx-auto max-w-7xl px-4 py-8">
      <div class="flex items-end justify-between gap-3 flex-wrap">
        <h2 class="text-2xl font-extrabold">Popular Now</h2>
        <div class="flex items-center gap-2 text-sm">
          <input id="gridSearch" placeholder="Search‚Ä¶" class="rounded-xl border px-3 py-2 text-sm">
          <select id="gridSort" class="rounded-xl border px-3 py-2 text-sm">
            <option value="az">A ‚Üí Z</option>
            <option value="za">Z ‚Üí A</option>
            <option value="pl">Price Low</option>
            <option value="ph">Price High</option>
          </select>
        </div>
      </div>
      <div id="popularGrid" class="mt-4 grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
    </div>
  </section>

  <!-- Trust tiles -->
  <section class="bg-gray-50 border-t">
    <div class="mx-auto max-w-7xl px-4 py-8 grid sm:grid-cols-3 gap-4 text-center text-sm">
      <div class="rounded-2xl border bg-white p-4">üöö Free delivery over ‚Çπ999</div>
      <div class="rounded-2xl border bg-white p-4">üõ† Warranty on appliances</div>
      <div class="rounded-2xl border bg-white p-4">üßæ GST invoice available</div>
    </div>
  </section>

  <!-- Newsletter -->
  <section class="bg-white border-t">
    <div class="mx-auto max-w-7xl px-4 py-10 text-center">
      <h3 class="text-xl font-extrabold">Get deals and new arrivals</h3>
      <p class="text-sm text-gray-600">We won‚Äôt spam. Relax.</p>
      <form class="mt-3 flex max-w-md mx-auto gap-2" onsubmit="event.preventDefault(); alert('Subscribed!');">
        <input class="flex-1 rounded-xl border px-3 py-2 text-sm" type="email" placeholder="your@email.com" required>
        <button class="rounded-xl bg-brand-600 hover:bg-brand-700 text-white px-4 py-2 text-sm font-semibold">Subscribe</button>
      </form>
    </div>
  </section>

  <!-- Footer -->
  <footer class="border-t bg-white">
    <div class="mx-auto max-w-7xl px-4 py-8 grid gap-6 sm:grid-cols-3 text-sm text-gray-700">
      <div>
        <div class="font-semibold text-gray-900">ANAA ENTERPRISES</div>
        L.I. Shopping Complex, Singjamei Bazar<br>
        Imphal West ‚Äì 795008, Manipur
      </div>
      <div>
        <div class="font-semibold text-gray-900">Contact</div>
        WhatsApp: <a href="https://wa.me/917005023608" class="text-brand-700 hover:underline">7005023608</a><br>
        Email: <a href="mailto:joykumarkaram@gmail.com" class="text-brand-700 hover:underline">joykumarkaram@gmail.com</a>
      </div>
      <div>
        <div class="font-semibold text-gray-900">Business Hours</div>
        Mon ‚Äì Sat: 9:00 AM ‚Äì 6:00 PM<br>
        Sunday: 10:00 AM ‚Äì 3:00 PM
      </div>
    </div>
    <div class="mx-auto max-w-7xl px-4 py-4 text-xs text-gray-500 text-center border-t">
      ¬© <span id="year"></span> ANAA ENTERPRISES. All rights reserved.
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mobile nav + search forwarding
    document.getElementById('navToggle')?.addEventListener('click', ()=> {
      document.getElementById('mobileNav').classList.toggle('hidden');
    });
    document.getElementById('searchForm')?.addEventListener('submit', e=>{
      e.preventDefault(); const q=document.getElementById('q').value.trim(); location.href='products.html'+(q?('?q='+encodeURIComponent(q)):'');
    });
    document.getElementById('mSearch')?.addEventListener('submit', e=>{
      e.preventDefault(); const q=document.getElementById('mq').value.trim(); location.href='products.html'+(q?('?q='+encodeURIComponent(q)):'');
    });

    // Cart badge
    const CART_KEY='anaa_cart';
    function getCart(){ try { return JSON.parse(localStorage.getItem(CART_KEY)||'[]'); } catch { return []; } }
    function cartCount(){ return getCart().reduce((s,i)=> s+Number(i.qty||0), 0); }
    function renderCartBadge(){
      document.getElementById('cartCount').textContent = cartCount();
      document.querySelector('[data-cart-count]')?.textContent = cartCount();
    }
    window.addEventListener('storage', e=>{ if(e.key===CART_KEY) renderCartBadge(); });
    window.addEventListener('cart-updated', renderCartBadge);
    renderCartBadge();

    // Helpers
    const esc = s => String(s||'').replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[m]));
    const fmt = n => '‚Çπ' + Number(n||0).toLocaleString('en-IN');

    // ----- DATA LOADERS (Firestore if available, else fallback) -----
    async function loadHero(){
      if(window.db){
        try{
          const { collection, getDocs, query, orderBy } = await import('https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js');
          const snap = await getDocs(query(collection(window.db,'heroSlides'), orderBy('sort')));
          const arr = snap.docs.map(d=>({ id:d.id, ...d.data() }));
          if(arr.length) return arr;
        }catch(e){ console.warn('heroSlides fetch failed', e); }
      }
      return [
        { title:'Up to 40% off Appliances', image:'https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&w=1600&auto=format&fit=crop', link:'products.html?cat=home-appliances' },
        { title:'Kitchen Deals', image:'https://images.unsplash.com/photo-1526318472351-c75fcf070305?q=80&w=1600&auto=format&fit=crop', link:'products.html?cat=home-appliances' },
        { title:'Storage & Plastic', image:'https://images.unsplash.com/photo-1519710164239-da123dc03ef4?q=80&w=1600&auto=format&fit=crop', link:'products.html?cat=plastic' }
      ];
    }

    async function loadCategories(){
      if(window.db){
        try{
          const { collection, getDocs, query, where, orderBy } = await import('https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js');
          const q = query(collection(window.db,'categories'), where('active','==',true), orderBy('sort'));
          const snap = await getDocs(q);
          const arr = snap.docs.map(d=>({ id:d.id, ...d.data() }));
          if(arr.length) return arr;
        }catch(e){ console.warn('categories fetch failed', e); }
      }
      return [
        { label:'Furniture', slug:'furniture', icon:'ü™ë' },
        { label:'Electronics', slug:'electronics', icon:'üîå' },
        { label:'Home Appliances', slug:'home-appliances', icon:'üßØ' },
        { label:'Household Products', slug:'household', icon:'üßΩ' },
        { label:'Plastic Products', slug:'plastic', icon:'üß∫' },
        { label:'Blankets & Mattress', slug:'blankets', icon:'üõèÔ∏è' }
      ];
    }

    async function loadOffers(){
      if(window.db){
        try{
          const { collection, getDocs, query, where, orderBy, limit } = await import('https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js');
          const q = query(collection(window.db,'products'), where('active','==',true), orderBy('createdAt','desc'), limit(16));
          const snap = await getDocs(q);
          const arr = snap.docs.map(d=>({ id:d.id, ...d.data() }));
          if(arr.length) return arr;
        }catch(e){ console.warn('offers fetch failed', e); }
      }
      return [
        { id:'1', title:'Electric Rice Cooker 1.8L', price:1599, image:'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?q=80&w=800&auto=format&fit=crop', category:'Home Appliances' },
        { id:'2', title:'Table Fan 400mm', price:1699, image:'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?q=80&w=800&auto=format&fit=crop', category:'Electronics' },
        { id:'3', title:'Cloth Storage Box 60L', price:399, image:'https://images.unsplash.com/photo-1519710164239-da123dc03ef4?q=80&w=800&auto=format&fit=crop', category:'Plastic Products' },
        { id:'4', title:'Pressure Cooker 5L', price:2199, image:'https://images.unsplash.com/photo-1621939514649-280153f2c27c?q=80&w=800&auto=format&fit=crop', category:'Home Appliances' }
      ];
    }

    async function loadPopular(){
      if(window.db){
        try{
          const { collection, getDocs, query, where, limit } = await import('https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js');
          const q = query(collection(window.db,'products'), where('active','==',true), limit(24));
          const snap = await getDocs(q);
          const arr = snap.docs.map(d=>({ id:d.id, ...d.data() }));
          if(arr.length) return arr;
        }catch(e){ console.warn('popular fetch failed', e); }
      }
      return [
        { id:'5', title:'Plastic Bucket 18L', price:179, image:'https://images.unsplash.com/photo-1603294237578-774ecf2d7d89?q=80&w=800&auto=format&fit=crop', category:'Plastic Products' },
        { id:'6', title:'Plastic Chair (Armless)', price:599, image:'https://images.unsplash.com/photo-1582582621959-48b89570f8a1?q=80&w=800&auto=format&fit=crop', category:'Furniture' },
        { id:'7', title:'Water Boiler 1.5L', price:999, image:'https://images.unsplash.com/photo-1551218808-94e220e084d2?q=80&w=800&auto=format&fit=crop', category:'Home Appliances' },
        { id:'8', title:'Blanket (Double)', price:1299, image:'https://images.unsplash.com/photo-1549187774-b4e9b0445b41?q=80&w=800&auto=format&fit=crop', category:'Blankets & Mattress' }
      ];
    }

    // ----- RENDERERS -----
    function renderHero(slides){
      const track = document.getElementById('heroTrack');
      const dots = document.getElementById('heroDots');
      track.innerHTML = slides.map(s=>`
        <a href="${esc(s.link||'#')}" class="carousel-slide relative">
          <img src="${esc(s.image)}" class="w-full h-72 md:h-[380px] object-cover" alt="">
          <div class="absolute inset-0 bg-black/30"></div>
          <div class="absolute inset-0 flex items-center justify-center text-white text-2xl md:text-3xl font-extrabold text-center px-4">${esc(s.title||'')}</div>
        </a>`).join('');
      dots.innerHTML = slides.map((_,i)=>`<span data-dot="${i}" class="h-2 w-2 rounded-full bg-white/40"></span>`).join('');
      // auto-slide
      let i=0; const total=slides.length;
      function go(n){
        i = (n+total)%total;
        track.style.transform = `translateX(-${i*100}%)`;
        dots.querySelectorAll('[data-dot]').forEach((d,ix)=> d.className = 'h-2 w-2 rounded-full '+(ix===i?'bg-white':'bg-white/40'));
      }
      setInterval(()=>go(i+1), 4000);
      go(0);
    }

    function renderCategories(cats){
      const chips = document.getElementById('catChips');
      chips.innerHTML = cats.map(c=>`
        <a href="products.html?cat=${encodeURIComponent(c.slug||c.label)}"
           class="rounded-full border px-3 py-1.5 text-sm hover:bg-gray-50 whitespace-nowrap">${esc(c.label)}</a>
      `).join('');
      const icons = document.getElementById('catIcons');
      icons.innerHTML = cats.map(c=>`
        <a href="products.html?cat=${encodeURIComponent(c.slug||c.label)}" class="flex-shrink-0 grid place-items-center gap-2">
          <div class="h-14 w-14 rounded-full bg-gray-100 grid place-items-center text-xl">${esc(c.icon||'üõí')}</div>
          <div class="text-xs font-semibold">${esc(c.label)}</div>
        </a>
      `).join('');
    }

    function renderOfferGrid(items){
      const box = document.getElementById('offerGrid');
      box.innerHTML = items.map(p=>`
        <div class="rounded-2xl border bg-white overflow-hidden hover:shadow-soft transition">
          <img src="${esc(p.image||'')}" alt="${esc(p.title)}" class="w-full aspect-[4/3] object-cover">
          <div class="p-3">
            <div class="text-xs text-gray-500 truncate">${esc(p.category||'')}</div>
            <div class="font-semibold truncate" title="${esc(p.title)}">${esc(p.title)}</div>
            <div class="mt-1 font-extrabold text-brand-700">${fmt(p.price||0)}</div>
            <button class="mt-2 w-full rounded-xl bg-brand-600 hover:bg-brand-700 text-white text-sm font-semibold px-3 py-2"
              onclick="addToCart('${esc(p.id)}','${esc(p.title)}',${Number(p.price||0)},'${esc(p.sku||'')}','${esc(p.image||'')}')">Add to Cart</button>
          </div>
        </div>
      `).join('');
    }

    let popular = [];
    function renderPopular(list){
      const pg = document.getElementById('popularGrid');
      pg.innerHTML = list.map(p=>`
        <div class="rounded-2xl border bg-white overflow-hidden hover:shadow-soft transition">
          <img src="${esc(p.image||'')}" alt="${esc(p.title)}" class="w-full aspect-[4/3] object-cover">
          <div class="p-3">
            <div class="text-xs text-gray-500 truncate">${esc(p.category||'')}</div>
            <div class="font-semibold truncate" title="${esc(p.title)}">${esc(p.title)}</div>
            <div class="mt-1 font-extrabold text-brand-700">${fmt(p.price||0)}</div>
            <button class="mt-2 w-full rounded-xl bg-brand-600 hover:bg-brand-700 text-white text-sm font-semibold px-3 py-2"
              onclick="addToCart('${esc(p.id)}','${esc(p.title)}',${Number(p.price||0)},'${esc(p.sku||'')}','${esc(p.image||'')}')">Add to Cart</button>
          </div>
        </div>
      `).join('');
    }

    // sorting/search for popular
    const gSearch = document.getElementById('gridSearch');
    const gSort = document.getElementById('gridSort');
    function applyPopular(){
      const q = (gSearch.value||'').toLowerCase();
      let list = popular.filter(p => (p.title||'').toLowerCase().includes(q));
      const s = gSort.value;
      if(s==='az') list.sort((a,b)=> String(a.title).localeCompare(String(b.title)));
      if(s==='za') list.sort((a,b)=> String(b.title).localeCompare(String(a.title)));
      if(s==='pl') list.sort((a,b)=> Number(a.price||0) - Number(b.price||0));
      if(s==='ph') list.sort((a,b)=> Number(b.price||0) - Number(a.price||0));
      renderPopular(list);
    }
    gSearch?.addEventListener('input', applyPopular);
    gSort?.addEventListener('change', applyPopular);

    // Add to cart
    function addToCart(id,title,price,sku,image){
      const cart = JSON.parse(localStorage.getItem(CART_KEY)||'[]');
      const i = cart.findIndex(x => String(x.id)===String(id));
      if(i>=0) cart[i].qty = Math.min(Number(cart[i].qty||0)+1, 99);
      else cart.push({ id, title, price, sku, image, qty:1 });
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      window.dispatchEvent(new Event('cart-updated'));
      alert(title + ' added to cart');
    }

    // Boot: load all content
    (async function(){
      renderHero(await loadHero());
      renderCategories(await loadCategories());
      renderOfferGrid(await loadOffers());
      popular = await loadPopular();
      applyPopular();
    })();
  </script>

  <!-- If you use Firebase, include your firebase-config to expose window.db -->
  <!--
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";
    const app = initializeApp({ /* your config */ });
    window.db = getFirestore(app);
  </script>
  -->
</body>
</html>
